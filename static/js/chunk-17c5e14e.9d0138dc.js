(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17c5e14e"],{"3c7f":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:4}},[o("span",{staticStyle:{"font-size":"20px"}},[o("b",[e._v("当前工作项目:")])])]),o("el-col",{attrs:{span:18}},[o("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择当前工作项目"},on:{change:e.changeProject},model:{value:e.queryParams.projectId,callback:function(t){e.$set(e.queryParams,"projectId",t)},expression:"queryParams.projectId"}},e._l(e.projectListArr,(function(e){return o("el-option",{key:e.id,attrs:{label:e.code+" "+e.name,value:e.id}})})),1)],1)],1),o("br")],1),e.queryParams.projectId?o("el-row",{staticClass:"mb8",attrs:{gutter:10}},[o("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getChangeProfessorList}})],1):e._e(),e.refreshTable&&e.queryParams.projectId?o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.changeProfessorList}},[o("el-table-column",{attrs:{prop:"professerName",fixed:"left",label:"专家姓名",align:"center",width:"100","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"professerMajor",fixed:"left",label:"专业方向",align:"center",width:"150","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"meetingCore",label:"评审会评述",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-rate",{attrs:{disabled:"","show-score":"",max:3,"text-color":"#ff9900","score-template":"{value}"},model:{value:t.row.meetingCore,callback:function(o){e.$set(t.row,"meetingCore",o)},expression:"scope.row.meetingCore"}})]}}],null,!1,2149726898)}),o("el-table-column",{attrs:{prop:"opinionsCore",label:"专家意见详实程度",align:"center",width:"130","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-rate",{attrs:{disabled:"","show-score":"",max:4,"text-color":"#ff9900","score-template":"{value}"},model:{value:t.row.opinionsCore,callback:function(o){e.$set(t.row,"opinionsCore",o)},expression:"scope.row.opinionsCore"}})]}}],null,!1,1000905807)}),o("el-table-column",{attrs:{prop:"speedCore",label:"沟通反馈速度",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-rate",{attrs:{disabled:"","show-score":"",max:2,"text-color":"#ff9900","score-template":"{value}"},model:{value:t.row.speedCore,callback:function(o){e.$set(t.row,"speedCore",o)},expression:"scope.row.speedCore"}})]}}],null,!1,3385947277)}),o("el-table-column",{attrs:{prop:"feesCore",label:"是否催要专家费",align:"center",width:"120","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-rate",{attrs:{disabled:"","show-score":"",max:1,"text-color":"#ff9900","score-template":"{value}"},model:{value:t.row.feesCore,callback:function(o){e.$set(t.row,"feesCore",o)},expression:"scope.row.feesCore"}})]}}],null,!1,4067754364)}),o("el-table-column",{attrs:{prop:"totalCore",label:"总分",align:"center",width:"100"}}),o("el-table-column",{attrs:{prop:"evaluate",label:"评价",align:"center",width:"150","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"scorer",label:"评价人",align:"center",width:"100","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{prop:"scoreTime",label:"评价时间",align:"center",width:"180","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.evaluateStatus?o("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(o){return e.evaluateProfesser(t.row)}}},[e._v("评价")]):e._e()]}}],null,!1,1979289282)})],1):e._e(),o("pagination",{directives:[{name:"show",rawName:"v-show",value:e.changeProfessorListTotal>0&&e.queryParams.projectId,expression:"changeProfessorListTotal > 0 && queryParams.projectId"}],attrs:{total:e.changeProfessorListTotal,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getChangeProfessorList}}),o("el-dialog",{attrs:{title:e.title,visible:e.openEvaluate,width:"680px","append-to-body":""},on:{"update:visible":function(t){e.openEvaluate=t}}},[o("el-form",{ref:"openEvaluateForm",attrs:{model:e.openEvaluateForm,rules:e.rules,"label-width":"140px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"评审会评述",prop:"meetingCore"}},[o("el-rate",{attrs:{max:3,"show-score":""},on:{change:e.sum},model:{value:e.openEvaluateForm.meetingCore,callback:function(t){e.$set(e.openEvaluateForm,"meetingCore",t)},expression:"openEvaluateForm.meetingCore"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"专家意见详实程度",prop:"opinionsCore"}},[o("el-rate",{attrs:{max:4,"show-score":""},on:{change:e.sum},model:{value:e.openEvaluateForm.opinionsCore,callback:function(t){e.$set(e.openEvaluateForm,"opinionsCore",t)},expression:"openEvaluateForm.opinionsCore"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"沟通反馈速度",prop:"speedCore"}},[o("el-rate",{attrs:{max:2,"show-score":""},on:{change:e.sum},model:{value:e.openEvaluateForm.speedCore,callback:function(t){e.$set(e.openEvaluateForm,"speedCore",t)},expression:"openEvaluateForm.speedCore"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"是否催要专家费",prop:"feesCore"}},[o("el-rate",{attrs:{max:1,"show-score":""},on:{change:e.sum},model:{value:e.openEvaluateForm.feesCore,callback:function(t){e.$set(e.openEvaluateForm,"feesCore",t)},expression:"openEvaluateForm.feesCore"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"总分",prop:"totalCore"}},[o("el-rate",{attrs:{max:10,disabled:"","show-score":""},model:{value:e.openEvaluateForm.totalCore,callback:function(t){e.$set(e.openEvaluateForm,"totalCore",t)},expression:"openEvaluateForm.totalCore"}}),o("el-button",{staticStyle:{"font-size":"12px","margin-top":"10px"},attrs:{type:"text"},on:{click:e.choice0Score}},[e._v("重置分数")])],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"评价",prop:"evaluate"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入评价"},model:{value:e.openEvaluateForm.evaluate,callback:function(t){e.$set(e.openEvaluateForm,"evaluate",t)},expression:"openEvaluateForm.evaluate"}})],1)],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),o("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},a=[],s=o("ade3"),l=(o("e9c4"),o("da61")),n=o("b775");function i(e){return Object(n["a"])({url:"/project/listAssessment",method:"get"})}function u(e){return Object(n["a"])({url:"/professerReview/saveCore",method:"post",data:e})}var c={name:"ProfessorScore",data:function(){var e;return e={projectListArr:[],loading:!1,showSearch:!0,refreshTable:!0,queryParams:{pageNum:1,pageSize:10},changeProfessorListTotal:0,changeProfessorList:[],queryProjectsParams:{pageNum:1,pageSize:10},showProjectsSearch:!0,loadingProjectsList:!1,refreshProjectsTable:!0,projectsList:[],projectsTotal:0,title:"",openJoinProject:!1,openEvaluate:!1},Object(s["a"])(e,"openEvaluate",!1),Object(s["a"])(e,"openEvaluateForm",{}),Object(s["a"])(e,"rules",{meetingCore:[{required:!0,message:"评审会评述评分不能为空",trigger:"blur"}],opinionsCore:[{required:!0,message:"专家意见详实程度评分不能为空",trigger:"blur"}],speedCore:[{required:!0,message:"沟通反馈速度评分不能为空",trigger:"blur"}],feesCore:[{required:!0,message:"是否催要专家费评分不能为空",trigger:"blur"}],evaluate:[{required:!0,message:"评价不能为空",trigger:"blur"}]}),e},created:function(){this.getProjectList()},methods:{getProjectList:function(){var e=this;i().then((function(t){e.projectListArr=t.data}))},changeProject:function(){this.getChangeProfessorList()},getChangeProfessorList:function(){var e=this;this.queryParams.projectId&&(this.loading=!0,Object(l["c"])(this.queryParams).then((function(t){var o=t.rows;e.changeProfessorList=o,e.changeProfessorListTotal=t.total,e.loading=!1})))},handleQuery:function(){this.queryParams.projectId?this.getChangeProfessorList():this.$modal.msgWarning("请选一个项目")},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},evaluateProfesser:function(e){this.openEvaluateForm.id=e.id,this.openEvaluateForm.professerId=e.professerId,this.openEvaluate=!0},choice0Score:function(){this.openEvaluateForm.meetingCore=0,this.openEvaluateForm.opinionsCore=0,this.openEvaluateForm.speedCore=0,this.openEvaluateForm.feesCore=0,this.openEvaluateForm.totalCore=0},sum:function(){var e=this.openEvaluateForm.meetingCore?this.openEvaluateForm.meetingCore:0,t=this.openEvaluateForm.opinionsCore?this.openEvaluateForm.opinionsCore:0,o=this.openEvaluateForm.speedCore?this.openEvaluateForm.speedCore:0,r=this.openEvaluateForm.feesCore?this.openEvaluateForm.feesCore:0;this.openEvaluateForm.totalCore=e+t+o+r},submitForm:function(){var e=this;this.$refs["openEvaluateForm"].validate((function(t){t&&u(JSON.stringify(e.openEvaluateForm)).then((function(t){e.$modal.msgSuccess("评价成功"),e.resetForm("openEvaluateForm"),e.openEvaluate=!1,e.handleQuery()}))}))},cancel:function(){this.openEvaluate=!1,this.reset()},reset:function(){this.openEvaluateForm={},this.resetForm("openEvaluateForm")}}},p=c,m=(o("c6ef"),o("2877")),f=Object(m["a"])(p,r,a,!1,null,"6cd3a660",null);t["default"]=f.exports},c6ef:function(e,t,o){"use strict";o("e83e")},da61:function(e,t,o){"use strict";o.d(t,"e",(function(){return a})),o.d(t,"c",(function(){return s})),o.d(t,"d",(function(){return l})),o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return i}));var r=o("b775");function a(e){return Object(r["a"])({url:"/project/listAllAssessment",method:"get"})}function s(e){return Object(r["a"])({url:"/professerReview/pageList",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/professerReview/otherList",method:"get",params:e})}function n(e){return Object(r["a"])({url:"/professerReview/choiceProfesser",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/professerReview/delProfesser?professerId="+e.professerId+"&projectId="+e.projectId,method:"delete"})}},e83e:function(e,t,o){}}]);